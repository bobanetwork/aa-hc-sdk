LavaPack.loadBundle([[63,{loglevel:3842,"webextension-polyfill":4472},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({location:e,registerOnboarding:t}){return async function(n,a,i,o){try{if("wallet_registerOnboarding"!==n.method)return void i();n.tabId&&n.tabId!==s.default.tabs.TAB_ID_NONE?await t(e,n.tabId):r.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),a.result=!0,o()}catch(e){o(e)}}};var r=a(e("loglevel")),s=a(e("webextension-polyfill"));function a(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[630,{"safe-buffer":629},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,s=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return n!==undefined?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var s=i(t[r]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--r<n||-2===s)return 0;if(s=i(t[r]),s>=0)return s>0&&(e.lastNeed=s-2),s;if(--r<n||-2===s)return 0;if(s=i(t[r]),s>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2>readable-stream>string_decoder",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/string_decoder/lib/string_decoder.js"}],[631,{_process:3992,"readable-stream":627,util:4423,xtend:4478},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,s=e("util").inherits,a=e("xtend");function i(e){r.call(this,e),this._destroyed=!1}function o(e,t,n){n(null,e)}function c(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=o),"function"!=typeof r&&(r=null),e(t,n,r)}}s(i,r),i.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,n){var r=new i(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=c((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=a(e,t),i.call(this,this.options)}return s(r,i),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=c((function(e,t,n){var r=new i(a({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[64,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.origin=e.origin,r()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[65,{"../../../shared/constants/app":4493,"../../../shared/constants/metametrics":4505,"../../../shared/constants/security-provider":4513,"../../../shared/constants/transaction":4520,"../../../ui/helpers/utils/metrics":5389,"../../../ui/pages/confirmations/utils/confirm":5724,"./snap-keyring/metrics":111,"@metamask/controller-utils":1163,"eth-rpc-errors":3257,"ethereumjs-util":3288},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({trackEvent:e,getMetricsState:t,rateLimitTimeout:n=3e5,rateLimitSamplePercent:E=.001,globalRateLimitTimeout:w=3e5,globalRateLimitMaxAmount:v=10,getAccountType:T,getDeviceModel:S,isConfirmationRedesignEnabled:M,snapAndHardwareMessenger:A,appStateController:P}){return async function(O,N,C){const{origin:R,method:k,params:I}=O,D=h[k]??f.RANDOM_SAMPLE;let j;switch(D){case f.TIMEOUT:j=void 0!==b[k];break;case f.NON_RATE_LIMITED:j=!1;break;case f.BLOCKED:j=!0;break;default:case f.RANDOM_SAMPLE:j=Math.random()>=E}const L=v>0&&_>=v,x=!0===t().participateInMetaMetrics,U=g[k],$={},G=R!==i.ORIGIN_METAMASK&&!j&&!L&&!0===x;if(G){const t=U?U.REQUESTED:o.MetaMetricsEventName.ProviderMethodCalled;if(t===o.MetaMetricsEventName.SignatureRequested){var Y,F,V,B,K;let e;var W,H;if($.signature_type=k,(0,a.isValidAddress)(null==O||null===(Y=O.params)||void 0===Y?void 0:Y[1]))e=null==O||null===(W=O.params)||void 0===W?void 0:W[0];else e=null==O||null===(H=O.params)||void 0===H?void 0:H[1];null!==(F=O.securityAlertResponse)&&void 0!==F&&F.providerRequestsCount&&Object.keys(O.securityAlertResponse.providerRequestsCount).forEach((e=>{$[`ppom_${e}_count`]=O.securityAlertResponse.providerRequestsCount[e]})),$.security_alert_response=(null===(V=O.securityAlertResponse)||void 0===V?void 0:V.result_type)??c.BlockaidResultType.NotApplicable,$.security_alert_reason=(null===(B=O.securityAlertResponse)||void 0===B?void 0:B.reason)??c.BlockaidReason.notApplicable,null!==(K=O.securityAlertResponse)&&void 0!==K&&K.description&&($.security_alert_description=O.securityAlertResponse.description);M()&&d.REDESIGN_APPROVAL_TYPES.find((e=>e===m[k]))&&($.ui_customizations=[...$.ui_customizations||[],o.MetaMetricsEventUiCustomization.RedesignedConfirmation]);const t=await(0,p.getSnapAndHardwareInfoForMetrics)(T,S,A);Object.assign($,t);try{if(k===i.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,r.detectSIWE)({data:e});t&&($.ui_customizations=[...$.ui_customizations||[],o.MetaMetricsEventUiCustomization.Siwe])}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else $.method=k;const s=y[k];s&&($.params=s(I)),e({event:t,category:o.MetaMetricsEventCategory.InpageProvider,referrer:{url:R},properties:$}),D===f.TIMEOUT&&(b[k]=setTimeout((()=>{delete b[k]}),n)),_+=1,setTimeout((()=>{_-=1}),w)}C((async t=>{var n,r,a,d;if(!1===G||void 0===U)return t();const p=k===i.MESSAGE_TYPE.ETH_SIGN&&(null===(n=N.error)||void 0===n?void 0:n.code)===s.errorCodes.rpc.methodNotFound;let f;p?(f=U.FAILED,$.error=N.error):(null===(r=N.error)||void 0===r?void 0:r.code)===s.errorCodes.provider.userRejectedRequest?f=U.REJECTED:(null===(a=N.error)||void 0===a?void 0:a.code)===s.errorCodes.rpc.internal&&"Request rejected by user or snap."===(null===(d=N.error)||void 0===d?void 0:d.message)?(f=U.REJECTED,$.status=N.error.message):f=U.APPROVED;let h={};if(!p&&u.SIGNING_METHODS.includes(k)){var m;const e=P.getSignatureSecurityAlertResponse(null===(m=O.securityAlertResponse)||void 0===m?void 0:m.securityAlertId);h=(0,l.getBlockaidMetricsProps)({securityAlertResponse:e})}const g={...$,...h,security_alert_reason:h.security_alert_response===c.BlockaidResultType.Benign?"":h.security_alert_reason};return e({event:f,category:o.MetaMetricsEventCategory.InpageProvider,referrer:{url:R},properties:g}),t()}))}};var r=e("@metamask/controller-utils"),s=e("eth-rpc-errors"),a=e("ethereumjs-util"),i=e("../../../shared/constants/app"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/security-provider"),u=e("../../../shared/constants/transaction"),l=e("../../../ui/helpers/utils/metrics"),d=e("../../../ui/pages/confirmations/utils/confirm"),p=e("./snap-keyring/metrics");const f={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},h={[i.MESSAGE_TYPE.ETH_SIGN]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.PERSONAL_SIGN]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_DECRYPT]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:f.NON_RATE_LIMITED,[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:f.TIMEOUT,[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:f.TIMEOUT,[i.MESSAGE_TYPE.SEND_METADATA]:f.BLOCKED,[i.MESSAGE_TYPE.ETH_CHAIN_ID]:f.BLOCKED,[i.MESSAGE_TYPE.ETH_ACCOUNTS]:f.BLOCKED,[i.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:f.BLOCKED,[i.MESSAGE_TYPE.GET_PROVIDER_STATE]:f.BLOCKED},m={[i.MESSAGE_TYPE.PERSONAL_SIGN]:r.ApprovalType.PersonalSign,[i.MESSAGE_TYPE.ETH_SIGN]:r.ApprovalType.Sign,[i.MESSAGE_TYPE.SIGN]:r.ApprovalType.SignTransaction,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V1]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:r.ApprovalType.EthSignTypedData,[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:r.ApprovalType.EthSignTypedData},g={[i.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,FAILED:o.MetaMetricsEventName.SignatureFailed,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[i.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:o.MetaMetricsEventName.DecryptionApproved,REJECTED:o.MetaMetricsEventName.DecryptionRejected,REQUESTED:o.MetaMetricsEventName.DecryptionRequested},[i.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:o.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:o.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:o.MetaMetricsEventName.EncryptionPublicKeyRequested},[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[i.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested}},y={[i.MESSAGE_TYPE.WATCH_ASSET]:({type:e})=>({type:e})},b={};let _=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[66,{"promise-to-callback":3993,"readable-stream":4258},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new i(e,t)};var r,s=e("readable-stream"),a=(r=e("promise-to-callback"))&&r.__esModule?r:{default:r};class i extends s.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,n){(0,a.default)(this._asyncWriteFn(e,t))(n)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[67,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.tabId=e.tabId,r()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[68,{"@metamask/browser-passworder":1155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encryptorFactory=void 0;var r=e("@metamask/browser-passworder");const s=e=>async(t,n,s,a)=>(0,r.encrypt)(t,n,s,a,{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>async(t,n,s)=>(0,r.encryptWithDetail)(t,n,s,{algorithm:"PBKDF2",params:{iterations:e}}),i=e=>async(t,n,s,a)=>(0,r.keyFromPassword)(t,n,s,a??{algorithm:"PBKDF2",params:{iterations:e}}),o=e=>t=>(0,r.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});n.encryptorFactory=e=>({encrypt:s(e),encryptWithKey:r.encryptWithKey,encryptWithDetail:a(e),decrypt:r.decrypt,decryptWithKey:r.decryptWithKey,decryptWithDetail:r.decryptWithDetail,keyFromPassword:i(e),isVaultUpdated:o(e),importKey:r.importKey,exportKey:r.exportKey,generateSalt:r.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[69,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[7,{"@metamask/base-controller":1154},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderController=void 0;var r=e("@metamask/base-controller");const s={pinnedAccountList:[],hiddenAccountList:[]},a={pinnedAccountList:{persist:!0,anonymous:!0},hiddenAccountList:{persist:!0,anonymous:!0}};class i extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:a,name:"AccountOrderController",state:{...s,...t}})}updateAccountsList(e){this.update((t=>(t.pinnedAccountList=e,t)))}updateHiddenAccountsList(e){this.update((t=>(t.hiddenAccountList=e,t)))}}n.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[70,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[71,{"./contracts/registry":69,"./contracts/resolver":70,"@ensdomains/content-hash":364,"@metamask/ethjs-contract":1375,"@metamask/ethjs-query":1379,"eth-ens-namehash":3225},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function({provider:e,name:t}){const n=new s.default(e),u=r.default.hash(t),d=new a.default(n),p=Number.parseInt(await n.net_version(),10),f=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(p);if(!f)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${p}"`);const h=d(o.default).at(f),m=(await h.resolver(u))[0];if(l(m))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const g=d(c.default).at(m),y=await g.supportsInterface("0xbc1c58d1"),b=await g.supportsInterface("0xd8389dc5");if(y[0]){const e=(await g.contenthash(u))[0];let t=i.default.decode(e);const n=i.default.getCodec(e);return"ipfs-ns"!==n&&"ipns-ns"!==n||(t=i.default.helpers.cidV0ToV1Base32(t)),{type:n,hash:t}}if(b[0]){const e=(await g.content(u))[0];if(l(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var r=u(e("eth-ens-namehash")),s=u(e("@metamask/ethjs-query")),a=u(e("@metamask/ethjs-contract")),i=u(e("@ensdomains/content-hash")),o=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[72,{"../../../../shared/modules/fetch-with-timeout":4542,"./resolver":71,"base32-encode":2930,"base64-js":2931,"webextension-polyfill":4472},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:n,getUseAddressBarEnsResolution:i}){const c=l.map((e=>`*://*.${e}/*`));return a.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){a.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:p}=c;if(-1===d||"0x1"!==t())return;const{hostname:f,pathname:h,search:m,hash:g}=new URL(p),y=f.split("."),b=y[y.length-1];l.includes(b)&&async function({tabId:t,name:c,pathname:l,search:d,fragment:p}){const f=n(),h=i(),m=`https://app.ens.domains/name/${c}`;h&&f&&a.default.tabs.update(t,{url:"loading.html"});let g=m;0;try{const{type:t,hash:n}=await(0,o.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===f)return void(g=null);const e=`https://${n}.${t.slice(0,4)}.${f}${l}${d||""}${p||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(g=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)g=`https://swarm-gateways.net/bzz:/${n}${l}${d||""}${p||""}`;else if("onion"===t||"onion3"===t)g=`http://${n}.onion${l}${d||""}${p||""}`;else if("zeronet"===t)g=`http://127.0.0.1:43110/${n}${l}${d||""}${p||""}`;else if("skynet-ns"===t){const e=n.padEnd(n.length+4-n.length%4,"="),t=s.default.toByteArray(e),a={padding:!1};g=`https://${(0,r.default)(t,"RFC4648-HEX",a).toLowerCase()}.siasky.net${l}${d||""}${p||""}`}}catch(e){console.warn(e)}finally{g&&(h||!h&&g!==m)&&a.default.tabs.update(t,{url:g})}}({tabId:d,name:f,pathname:h,search:m,fragment:g})}};var r=c(e("base32-encode")),s=c(e("base64-js")),a=c(e("webextension-polyfill")),i=c(e("../../../../shared/modules/fetch-with-timeout")),o=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,i.default)(),l=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[75,{lodash:3836},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return s((0,r.cloneDeep)(e),(e=>null===e?"null":typeof e))};var r=e("lodash");function s(e={},t){return Object.entries(e).forEach((([n,r])=>{e[n]="object"==typeof r&&null!==r?s(r,t):t(r)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[76,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hardwareKeyringBuilderFactory=function(e,t){const n=()=>new e({bridge:new t});return n.type=e.type,n}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[77,{"@metamask/keyring-api":1444,"@metamask/permission-controller":1624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isProtocolAllowed=c,n.keyringSnapPermissionsBuilder=function(e,t){return()=>{if("metamask"===t)return a;const n=e.getSubjectMetadata(t);return(null==n?void 0:n.subjectType)===r.SubjectType.Website&&c(t)?i:[]}};var r=e("@metamask/permission-controller"),s=e("@metamask/keyring-api");const a=[s.KeyringRpcMethod.ListAccounts,s.KeyringRpcMethod.GetAccount,s.KeyringRpcMethod.FilterAccountChains,s.KeyringRpcMethod.DeleteAccount,s.KeyringRpcMethod.ListRequests,s.KeyringRpcMethod.GetRequest,s.KeyringRpcMethod.SubmitRequest,s.KeyringRpcMethod.RejectRequest],i=[s.KeyringRpcMethod.ListAccounts,s.KeyringRpcMethod.GetAccount,s.KeyringRpcMethod.CreateAccount,s.KeyringRpcMethod.FilterAccountChains,s.KeyringRpcMethod.UpdateAccount,s.KeyringRpcMethod.DeleteAccount,s.KeyringRpcMethod.ExportAccount,s.KeyringRpcMethod.ListRequests,s.KeyringRpcMethod.GetRequest,s.KeyringRpcMethod.ApproveRequest,s.KeyringRpcMethod.RejectRequest,s.KeyringRpcMethod.SubmitRequest],o=["https:","http:"];function c(e){try{const t=new URL(e);return o.includes(t.protocol)}catch(e){return!1}}}}},{package:"$root$",file:"app/scripts/lib/keyring-snaps-permissions.ts"}],[8,{"../../../shared/constants/alerts":4492,"@metamask/obs-store":1610},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/obs-store"),s=e("../../../shared/constants/alerts");const a={alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};n.default=class{constructor(e={}){const{initState:t={},controllerMessenger:n}=e,s={...a,alertEnabledness:{...a.alertEnabledness,...t.alertEnabledness}};this.store=new r.ObservableStore(s),this.controllerMessenger=n,this.selectedAddress=this.controllerMessenger.call("AccountsController:getSelectedAccount"),this.controllerMessenger.subscribe("AccountsController:selectedAccountChange",(e=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e.address&&(this.selectedAddress=e.address,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:n}=this.store.getState();n={...n},n[e]=t,this.store.updateState({alertEnabledness:n})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,s.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:n}=this.store.getState();n={...n},n[e]=t,this.store.updateState({web3ShimUsageOrigins:n})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[80,{"../util":120,"json-rpc-engine":3680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:s,params:a}=t;if("eth_getTransactionCount"!==s)return void r();const[i,o]=a;"pending"===o?n.result=await e(i,t.networkClientId):r()}))},n.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:a,params:i}=t;if("eth_getTransactionByHash"!==a)return void r();const[o]=i,c=e(o);c?n.result=(0,s.formatTxMetaForRpcResult)(c):r()}))};var r=e("json-rpc-engine"),s=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[81,{events:3328,loglevel:3842},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("events")),s=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const n=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||n&&n.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const n of t)try{s.default.info(`Running migration ${n.version}...`);const t=await n.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==n.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,s.default.info(`Migration ${n.version} complete`)}catch(t){const r=t.message;return t.message=`MetaMask Migration Error #${n.version}: ${r}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}n.default=i}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[84,{"../../../shared/constants/notifications":4508,"../platforms/extension":252,"@metamask/safe-event-emitter":1718},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NOTIFICATION_MANAGER_EVENTS=void 0;var r=i(e("@metamask/safe-event-emitter")),s=i(e("../platforms/extension")),a=e("../../../shared/constants/notifications");function i(e){return e&&e.__esModule?e:{default:e}}const o=n.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends r.default{constructor(){super(),this.platform=new s.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const n=await this._getPopup(t);if(n)await this.platform.focusWindow(n.id);else{let e=0,t=0;try{const n=await this.platform.getLastFocusedWindow();t=n.top,e=Math.max(n.left+(n.width-a.NOTIFICATION_WIDTH),0)}catch(n){const{screenX:r,screenY:s,outerWidth:i}=window;t=Math.max(s,0),e=Math.max(r+(i-a.NOTIFICATION_WIDTH),0)}const n=await this.platform.openWindow({url:"notification.html",type:"popup",width:a.NOTIFICATION_WIDTH,height:a.NOTIFICATION_HEIGHT,left:e,top:t});n.left!==e&&"fullscreen"!==n.state&&await this.platform.updateWindowPosition(n.id,e,t),this._setCurrentPopupId(n.id),this._popupId=n.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}n.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[85,{"../../../../shared/constants/offscreen-communication":4509,"eth-lattice-keyring":3226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LatticeKeyringOffscreen=void 0;var r,s=(r=e("eth-lattice-keyring"))&&r.__esModule?r:{default:r},a=e("../../../../shared/constants/offscreen-communication");class i extends s.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${a.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,n)=>{chrome.runtime.sendMessage({target:a.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&n(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}n.LatticeKeyringOffscreen=i,function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,"type",void 0),i.type=s.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[86,{"../../../../shared/constants/offscreen-communication":4509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerOffscreenBridge=void 0;var r=e("../../../../shared/constants/offscreen-communication");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.LedgerOffscreenBridge=class{constructor(){s(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===r.OffscreenCommunicationTarget.extension&&e.event===r.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}attemptMakeApp(){return new Promise(((e,t)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.makeApp},(n=>{n.success?e(!0):n.error?t(n.error):t(new Error("Unknown error occurred"))}))}))}updateTransportMethod(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.updateTransport,params:{transportType:e}},(e=>{e.success?t(!0):n(new Error("Ledger transport could not be updated"))}))}))}getPublicKey(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.getPublicKey,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignTransaction(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signTransaction,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignMessage(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signPersonalMessage,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignTypedData(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signTypedData,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[87,{"../../../../shared/constants/offscreen-communication":4509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorOffscreenBridge=void 0;var r=e("../../../../shared/constants/offscreen-communication");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.TrezorOffscreenBridge=class{constructor(){s(this,"model",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===r.OffscreenCommunicationTarget.extension&&e.event===r.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload)})),new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[88,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.IndexedDBPPOMStorage=void 0;const a=async(e,t,n)=>{const r=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==n)throw new Error(`Checksum mismatch for key ${e}`)};var i=new WeakSet;function o(e){return new Promise(((t,n)=>{const r=indexedDB.open(this.storeName,this.dbVersion);r.onerror=e=>{var t;n(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},r.onsuccess=n=>{const r=n.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(r)}}))}n.IndexedDBPPOMStorage=class{constructor(e,t){r(this,i),s(this,"storeName",void 0),s(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,n="readonly"){return new Promise(((r,s)=>{(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n})(this,i,o).call(this,n).then((n=>{const a=n[e](t);a.onsuccess=async e=>{r(e)},a.onerror=t=>{var n;s(new Error(`Error in indexDB operation ${e}: ${null===(n=t.target)||void 0===n?void 0:n.error}`))}})).catch((e=>{s(e)}))}))}async read(e,t){var n;const r=null===(n=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===n||null===(n=n.result)||void 0===n?void 0:n.data;return await a(e,r,t),r}async write(e,t,n){await a(e,t,n),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[89,{"../../../../shared/constants/security-provider":4513,"../../../../shared/constants/transaction":4520,"./ppom-util":90},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createPPOMMiddleware=function(e,t,n,o,c){return async(u,l,d)=>{try{var p;const l=null===(p=t.store.getState())||void 0===p?void 0:p.securityAlertsEnabled,{chainId:d}=n.state.providerConfig;if(!l||!i.includes(u.method)||!s.SECURITY_PROVIDER_SUPPORTED_CHAIN_IDS.includes(d))return;const f=(0,a.generateSecurityAlertId)();(0,a.validateRequestWithPPOM)({ppomController:e,request:u,securityAlertId:f}).then((e=>{c(u.method,f,e)}));const h={...s.LOADING_SECURITY_ALERT_RESPONSE,securityAlertId:f};r.SIGNING_METHODS.includes(u.method)&&o.addSignatureSecurityAlertResponse(h),u.securityAlertResponse=h}catch(e){u.securityAlertResponse=(0,a.handlePPOMError)(e,"Error createPPOMMiddleware: ")}finally{d()}}};var r=e("../../../../shared/constants/transaction"),s=e("../../../../shared/constants/security-provider"),a=e("./ppom-util");const i=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...r.SIGNING_METHODS])}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[9,{"@metamask/obs-store":1610,events:3328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("events"))&&r.__esModule?r:{default:r},a=e("@metamask/obs-store");function i(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}const u={currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0,showTokenAutodetectModalOnUpgrade:!1};var l=new WeakSet,d=new WeakSet;class p extends s.default{constructor({currentAppVersion:e="",currentMigrationVersion:t=0,state:n={}}){super(),i(this,d),i(this,l),o(this,"store",void 0),this.store=new a.ObservableStore({...u,...n}),c(this,l,f).call(this,e),c(this,d,h).call(this,t)}setShowTokenAutodetectModalOnUpgrade(e){this.store.updateState({showTokenAutodetectModalOnUpgrade:e})}}function f(e){const t=this.store.getState().currentAppVersion;e!==t&&this.store.updateState({currentAppVersion:e,previousAppVersion:t,showTokenAutodetectModalOnUpgrade:null})}function h(e){const t=this.store.getState().currentMigrationVersion;e!==t&&this.store.updateState({previousMigrationVersion:t,currentMigrationVersion:e})}n.default=p}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[90,{"../../../../shared/constants/security-provider":4513,"../../../../shared/constants/transaction":4520,"@metamask/transaction-controller":2234,uuid:4424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateSecurityAlertId=function(){return(0,s.v4)()},n.handlePPOMError=l,n.updateSecurityAlertResponse=async function({appStateController:e,method:t,securityAlertId:n,securityAlertResponse:r,signatureController:s,transactionController:a}){const o=i.SIGNING_METHODS.includes(t),c=await async function(e,t,n,r){const s=i.SIGNING_METHODS.includes(t);for(;;){let t;if(t=s?Object.values(n.messages).find((t=>{var n;return(null===(n=t.securityAlertResponse)||void 0===n?void 0:n.securityAlertId)===e})):r.state.transactions.find((t=>{var n;return(null===(n=t.securityAlertResponse)||void 0===n?void 0:n.securityAlertId)===e})),t)return t;await new Promise((e=>setTimeout(e,100)))}}(n,t,s,a);o?e.addSignatureSecurityAlertResponse(r):a.updateSecurityAlertResponse(c.id,r)},n.validateRequestWithPPOM=async function({ppomController:e,request:t,securityAlertId:n}){try{return await e.usePPOM((async e=>await async function(e,t,n){try{const s=function(e){var t;if(e.method!==c)return e;const n=(null===(t=e.params)||void 0===t?void 0:t[0])||{},s=(0,r.normalizeTransactionParams)(n);return{...e,params:[s]}}(e);return{...await n.validateJsonRpc(s),securityAlertId:t}}catch(e){return l(e,"Error validating JSON RPC using PPOM: ")}}(t,n,e)))}catch(e){return l(e,"Error validateRequestWithPPOM#usePPOM: ")}};var r=e("@metamask/transaction-controller"),s=e("uuid"),a=e("../../../../shared/constants/security-provider"),i=e("../../../../shared/constants/transaction");const{sentry:o}=global,c="eth_sendTransaction",u={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored};function l(e,t){const n=function(e){if("object"==typeof e||"string"==typeof e)return e;return JSON.stringify(e)}(e),r=function(e){if(e instanceof Error)return`${e.name}: ${e.message}`;return JSON.stringify(e)}(e);return null==o||o.captureException(e),console.error(t,n),{...u,description:r}}}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[91,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PPOM=void 0,n.initSync=function(e){if(r!==undefined)return r;const t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return P(n,e)},n.main=function(){r.main()};const s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&s.decode();let a=null;function i(){return null!==a&&0!==a.byteLength||(a=new Uint8Array(r.memory.buffer)),a}function o(e,t){return e>>>=0,s.decode(i().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function d(e){return c[e]}function p(e){const t=d(e);return function(e){e<132||(c[e]=u,u=e)}(e),t}let f=0;const h="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},m="function"==typeof h.encodeInto?function(e,t){return h.encodeInto(e,t)}:function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(n===undefined){const n=h.encode(e),r=t(n.length,1)>>>0;return i().subarray(r,r+n.length).set(n),f=n.length,r}let r=e.length,s=t(r,1)>>>0;const a=i();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;a[s+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),s=n(s,r,r=o+3*e.length,1)>>>0;const t=i().subarray(s+o,s+r);o+=m(e,t).written}return f=o,s}let y=null;function b(){return null!==y&&0!==y.byteLength||(y=new Int32Array(r.memory.buffer)),y}function _(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=_(e[0]));for(let r=1;r<t;r++)n+=", "+_(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function E(e,t,n){r.wasm_bindgen__convert__closures__invoke1_mut(e,t,l(n))}function w(e,t){r._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let v=null;function T(e,t){const n=t(4*e.length,4)>>>0,s=(null!==v&&0!==v.byteLength||(v=new Uint32Array(r.memory.buffer)),v);for(let t=0;t<e.length;t++)s[n/4+t]=l(e[t]);return f=e.length,n}function S(e,t){try{return e.apply(this,t)}catch(e){r.__wbindgen_exn_store(l(e))}}class M{static __wrap(e){e>>>=0;const t=Object.create(M.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_ppom_free(e)}static new(e,t){const n=T(t,r.__wbindgen_malloc),s=f;return p(r.ppom_new(l(e),n,s))}validateJsonRpc(e){return p(r.ppom_validateJsonRpc(this.__wbg_ptr,l(e)))}static version(){return p(r.ppom_version())}}function A(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return l(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return S((function(e,t,n){return l(d(e).call(d(t),d(n)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return S((function(e,t,n,r){return l(d(e).call(d(t),d(n),d(r)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return l(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return l(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var n={a:e,b:t};const s=new Promise(((e,t)=>{const s=n.a;n.a=0;try{return function(e,t,n,s){r.wasm_bindgen__convert__closures__invoke2_mut(e,t,l(n),l(s))}(s,n.b,e,t)}finally{n.a=s}}));return l(s)}finally{n.a=n.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return l(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return S((function(e,t){return l(JSON.parse(o(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return l(M.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return l(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,n){d(e).set(d(t),n>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return S((function(e){return l(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,n){return l(d(e).then(d(t),d(n)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return l(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=p(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,n){const r=function(e,t,n,r){const s={a:e,b:t,cnt:1},a=(...e)=>{s.cnt++;const t=s.a;s.a=0;try{return r(t,s.b,...e)}finally{0==--s.cnt?n(t,s.b):s.a=t}};return a.original=s,a}(e,t,w,E);return l(r)},e.wbg.__wbindgen_debug_string=function(e,t){const n=g(_(d(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),s=f;b()[e/4+1]=s,b()[e/4+0]=n},e.wbg.__wbindgen_error_new=function(e,t){return l(new Error(o(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return l(r.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){p(e)},e.wbg.__wbindgen_string_get=function(e,t){const n=d(t),s="string"==typeof n?n:undefined;var a,i=(a=s)===undefined||null===a?0:g(s,r.__wbindgen_malloc,r.__wbindgen_realloc),o=f;b()[e/4+1]=o,b()[e/4+0]=i},e.wbg.__wbindgen_string_new=function(e,t){return l(o(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(o(e,t))},e}function P(e,t){return r=e.exports,O.__wbindgen_wasm_module=t,y=null,v=null,a=null,r.__wbindgen_start(),r}async function O(e){if(r!==undefined)return r;const t=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return P(n,s)}n.PPOM=M;n.default=O}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[92,{"./handlers":98,"@metamask/permission-controller":1624,"@metamask/snaps-rpc-methods":2086,"@metamask/utils":2300,"eth-rpc-errors":3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createMethodMiddleware=n.createLegacyMethodMiddleware=void 0;var r=e("@metamask/permission-controller"),s=e("@metamask/snaps-rpc-methods"),a=e("@metamask/utils"),i=e("eth-rpc-errors"),o=e("./handlers");const c=[...o.handlers,...r.permissionRpcMethods.handlers];n.createMethodMiddleware=u(c),n.createLegacyMethodMiddleware=u(o.legacyHandlers);function u(e){const t=e.reduce(((e,t)=>{for(const n of t.methodNames)e[n]=t;return e}),{}),n=new Set(e.flatMap((({hookNames:e})=>Object.getOwnPropertyNames(e))));return e=>{!function(e,t){const n=[];if(t.forEach((t=>{(0,a.hasProperty)(e,t)||n.push(t)})),n.length>0)throw new Error(`Missing expected hooks:\n\n${n.join("\n")}\n`);const r=Object.getOwnPropertyNames(e).filter((e=>!t.has(e)));if(r.length>0)throw new Error(`Received unexpected hooks:\n\n${r.join("\n")}\n`)}(e,n);return async(n,r,a,o)=>{const c=t[n.method];if(c){const{implementation:t,hookNames:u}=c;try{return await t(n,r,a,o,(0,s.selectHooks)(e,u))}catch(e){return o(e instanceof Error?e:i.ethErrors.rpc.internal({data:e}))}}return a()}}}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[93,{"../../../../shared/constants/network":4507,"eth-rpc-errors":3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createUnsupportedMethodMiddleware=function(){return async function(e,t,n,a){return s.UNSUPPORTED_RPC_METHODS.has(e.method)?a(r.ethErrors.rpc.methodNotSupported()):n()}};var r=e("eth-rpc-errors"),s=e("../../../../shared/constants/network")}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createUnsupportedMethodMiddleware.ts"}],[94,{"../../../../../shared/constants/app":4493,"./ethereum-chain-utils":96,"@metamask/controller-utils":1163,"eth-rpc-errors":3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),s=e("@metamask/controller-utils"),a=e("../../../../../shared/constants/app"),i=e("./ethereum-chain-utils");const o={methodNames:[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,n,a,{upsertNetworkConfiguration:o,getCurrentRpcUrl:c,findNetworkConfigurationBy:u,setActiveNetwork:l,requestUserApproval:d,startApprovalFlow:p,endApprovalFlow:f,getCurrentChainIdForDomain:h,getCaveat:m,requestPermittedChainsPermission:g,getChainPermissionsFeatureFlag:y}){let b;try{b=(0,i.validateAddEthereumChainParams)(e.params[0],a)}catch(e){return a(e)}const{chainId:_,chainName:E,firstValidBlockExplorerUrl:w,firstValidRPCUrl:v,ticker:T}=b,{origin:S}=e,M=h(S),A=(0,i.findExistingNetwork)(M,u),P=(0,i.findExistingNetwork)(_,u);if(P&&P.chainId===_&&P.ticker!==T)return a(r.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${T}`}));let O,N,C;if(P&&P.rpcUrl===v){O=P.id??P.type;const e=c();if(M===_&&e===v)return a();N={toNetworkConfiguration:P,fromNetworkConfiguration:A}}else{({id:C}=await p());try{await d({origin:S,type:s.ApprovalType.AddEthereumChain,requestData:{chainId:_,rpcPrefs:{blockExplorerUrl:w},chainName:E,rpcUrl:v,ticker:T}}),O=await o({chainId:_,rpcPrefs:{blockExplorerUrl:w},nickname:E,rpcUrl:v,ticker:T},{source:"dapp",referrer:S})}catch(e){return f({id:C}),a(e)}N={toNetworkConfiguration:{rpcUrl:v,chainId:_,nickname:E,ticker:T,networkClientId:O},fromNetworkConfiguration:A}}return(0,i.switchChain)(t,a,S,_,N,O,C,{getChainPermissionsFeatureFlag:y,setActiveNetwork:l,requestUserApproval:d,getCaveat:m,requestPermittedChainsPermission:g,endApprovalFlow:f})},hookNames:{upsertNetworkConfiguration:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setActiveNetwork:!0,requestUserApproval:!0,startApprovalFlow:!0,endApprovalFlow:!0,getCurrentChainIdForDomain:!0,getCaveat:!0,requestPermittedChainsPermission:!0,getChainPermissionsFeatureFlag:!0}};n.default=o}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[95,{"../../../../../shared/constants/app":4493},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,n,r,{getAccounts:s}){return t.result=await s(),r()},hookNames:{getAccounts:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[96,{"../../../../../shared/constants/app":4493,"../../../../../shared/constants/network":4507,"../../../../../shared/constants/permissions":4511,"../../../../../shared/modules/network.utils":4548,"../../../controllers/permissions":31,"../../util":120,"@metamask/controller-utils":1163,"eth-rpc-errors":3257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.findExistingNetwork=function(e,t){if(Object.values(a.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(e))return{chainId:e,ticker:a.CURRENCY_SYMBOLS.ETH,nickname:a.NETWORK_TO_NAME_MAP[e],rpcUrl:a.CHAIN_ID_TO_RPC_URL_MAP[e],type:a.CHAIN_ID_TO_TYPE_MAP[e]};return t({chainId:e})},n.switchChain=async function(e,t,n,a,i,c,l,{getChainPermissionsFeatureFlag:d,setActiveNetwork:p,endApprovalFlow:f,requestUserApproval:h,getCaveat:m,requestPermittedChainsPermission:g}){try{if(d()){const{value:e}=m({target:u.PermissionNames.permittedChains,caveatType:o.CaveatTypes.restrictNetworkSwitching})??{};e!==undefined&&e.includes(a)||await g([...e??[],a])}else await h({origin:n,type:s.ApprovalType.SwitchEthereumChain,requestData:i});await p(c),e.result=null}catch(n){return n.code===r.errorCodes.provider.userRejectedRequest&&l?(e.result=null,t()):t(n)}finally{l&&f({id:l})}return t()},n.validateAddEthereumChainParams=function(e,t){if(!e||"object"!=typeof e)throw r.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e)}`});const{chainId:n,chainName:s,blockExplorerUrls:a,nativeCurrency:i,rpcUrls:o,...u}=e,p=Object.keys(u).filter((e=>!["iconUrls"].includes(e)));if(p.length>0)throw r.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${p}`});const f=d(n);if(!o||!Array.isArray(o)||0===o.length)throw r.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});const h=e=>{const t=(0,l.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)},m=o.find((e=>h(e))),g=null!==a&&Array.isArray(a)?a.find((e=>h(e))):null;if(!m)throw r.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${o}`});if(null!==a&&!g)throw r.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${a}`});if("string"!=typeof s||!s)throw r.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${s}`});const y=s.length>100?s.substring(0,100):s;if(null!==i){if("object"!=typeof i||Array.isArray(i))throw r.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${i}`});if(18!==i.decimals)throw r.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${i.decimals}`});if(!i.symbol||"string"!=typeof i.symbol)throw r.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${i.symbol}`})}const b=(null==i?void 0:i.symbol)||c.UNKNOWN_TICKER_SYMBOL;if(b!==c.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof b||b.length<1||b.length>6))throw r.ethErrors.rpc.invalidParams({message:`Expected 1-6 character string 'nativeCurrency.symbol'. Received:\n${b}`});return{chainId:f,chainName:y,firstValidBlockExplorerUrl:g,firstValidRPCUrl:m,ticker:b}},n.validateChainId=d,n.validateSwitchEthereumChainParams=function(e,t){var n;if(null===(n=e.params)||void 0===n||!n[0]||"object"!=typeof e.params[0])throw r.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`});const{chainId:s,...a}=e.params[0];if(Object.keys(a).length>0)throw r.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${Object.keys(a)}`});return d(s)};var r=e("eth-rpc-errors"),s=e("@metamask/controller-utils"),a=e("../../../../../shared/constants/network"),i=e("../../../../../shared/modules/network.utils"),o=e("../../../../../shared/constants/permissions"),c=e("../../../../../shared/constants/app"),u=e("../../../controllers/permissions"),l=e("../../util");function d(e){const t="string"==typeof e&&e.toLowerCase();if(!(0,i.isPrefixedFormattedHexString)(t))throw r.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${e}`});if(!(0,i.isSafeChainId)(parseInt(t,16)))throw r.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${t}": numerical value greater than max safe value. Received:\n${e}`});return t}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/ethereum-chain-utils.js"}],[97,{"../../../../../shared/constants/app":4493},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,n,r,{getProviderState:s}){return t.result={...await s(e.origin)},r()},hookNames:{getProviderState:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[98,{"./add-ethereum-chain":94,"./eth-accounts":95,"./get-provider-state":97,"./log-web3-shim-usage":99,"./request-accounts":100,"./send-metadata":101,"./switch-ethereum-chain":102,"./watch-asset":103},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.legacyHandlers=n.handlers=void 0;var r=d(e("./add-ethereum-chain")),s=d(e("./eth-accounts")),a=d(e("./get-provider-state")),i=d(e("./log-web3-shim-usage")),o=d(e("./request-accounts")),c=d(e("./send-metadata")),u=d(e("./switch-ethereum-chain")),l=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}n.handlers=[r.default,a.default,i.default,o.default,c.default,u.default,l.default],n.legacyHandlers=[s.default]}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/hybrid-compute-sdk.ts"}],[99,{"../../../../../shared/constants/app":4493},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,n,r,{getWeb3ShimUsageState:s,setWeb3ShimUsageRecorded:a}){const{origin:i}=e;s(i)===undefined&&a(i);return t.result=!0,r()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[5,{"../../shared/constants/app":4493,"../../shared/constants/metametrics":4505,"../../shared/modules/browser-runtime.utils":4534,"../../shared/modules/mv3.utils":4547,"../../shared/modules/object.utils":4549,"../../test/e2e/default-fixture":4563,"./first-time-state":50,"./lib/createStreamSink":66,"./lib/ens-ipfs/setup":72,"./lib/get-first-preferred-lang-code":74,"./lib/getObjStructure":75,"./lib/local-store":78,"./lib/migrator":81,"./lib/network-store":83,"./lib/notification-manager":84,"./lib/setup-initial-state-hooks":108,"./lib/setupSentry":109,"./lib/util":120,"./metamask-controller":121,"./migrations":250,"./offscreen":251,"./platforms/extension":252,"./skip-onboarding":253,"@metamask/controller-utils":1163,"@metamask/desktop/dist/constants":1188,"@metamask/desktop/dist/desktop-manager":1193,"@metamask/obs-store":1610,"@metamask/utils":2300,"debounce-stream":3168,"eth-rpc-errors":3257,events:3328,"extension-port-stream":3331,loglevel:3842,"readable-stream":4258,"webextension-polyfill":4472},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.loadStateFromPersistence=de,n.setupController=fe,n.statePersistenceEvents=void 0,e("./lib/setup-initial-state-hooks");var r=L(e("events")),s=e("readable-stream"),a=L(e("debounce-stream")),i=L(e("loglevel")),o=L(e("webextension-polyfill")),c=e("@metamask/obs-store"),u=e("@metamask/utils"),l=e("@metamask/controller-utils"),d=L(e("extension-port-stream")),p=e("eth-rpc-errors"),f=e("../../shared/constants/app"),h=e("../../shared/constants/metametrics"),m=e("../../shared/modules/browser-runtime.utils"),g=e("../../shared/modules/mv3.utils"),y=e("../../shared/modules/object.utils"),b=(e("../../test/e2e/default-fixture"),L(e("./migrations"))),_=L(e("./lib/migrator")),E=L(e("./platforms/extension")),w=L(e("./lib/local-store")),v=(L(e("./lib/network-store")),e("./lib/setupSentry")),T=L(e("./lib/createStreamSink")),S=j(e("./lib/notification-manager")),M=j(e("./metamask-controller")),A=L(e("./first-time-state")),P=L(e("./lib/get-first-preferred-lang-code")),O=L(e("./lib/getObjStructure")),N=L(e("./lib/ens-ipfs/setup")),C=e("./lib/util"),R=(e("./skip-onboarding"),e("./offscreen")),k=e("@metamask/desktop/dist/constants"),I=L(e("@metamask/desktop/dist/desktop-manager"));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function L(e){return e&&e.__esModule?e:{default:e}}const x=new w.default;global.stateHooks.getMostRecentPersistedState=()=>x.mostRecentRetrievedState;const{sentry:U}=global;let $={...A.default};const G={[f.ENVIRONMENT_TYPE_POPUP]:!0,[f.ENVIRONMENT_TYPE_NOTIFICATION]:!0,[f.ENVIRONMENT_TYPE_FULLSCREEN]:!0},Y=["trezor-connect"];i.default.setLevel("info",!1);const F=new E.default,V=new S.default;let B=0,K=!1,W=!1;const H={},q={};let z,J;const Q={};const X=new URL("https://metamask.github.io/phishing-warning/v3.0.3/"),Z=1e3,ee={EXTENSION:"EXTENSION",DESKTOP:"DESKTOP_APP"},te=n.statePersistenceEvents=new r.default,{promise:ne,resolve:re,reject:se}=(0,C.deferredPromise)(),ae=async()=>{const e=await o.default.tabs.query({url:"<all_urls>",windowType:"normal"}).then((e=>((0,m.checkForLastErrorAndLog)(),e))).catch((()=>{(0,m.checkForLastErrorAndLog)()}));for(const t of e)o.default.tabs.sendMessage(t.id,{name:f.EXTENSION_MESSAGES.READY}).then((()=>{(0,m.checkForLastErrorAndLog)()})).catch((()=>{(0,m.checkForLastErrorAndLog)()}))};let ie,oe;function ce(){const e=(new Date).toISOString();o.default.storage.session.set({timestamp:e})}async function ue(){try{const t=g.isManifestV3?(0,R.createOffscreen)():null,n=await de(),r=n.data,s=await(0,P.default)();let a;if(await I.default.init(F.getVersion()),g.isManifestV3){var e;if(!1!==(null===(e=r.PreferencesController)||void 0===e?void 0:e.enableMV3TimestampSave)){const e=2e3;ce(),setInterval(ce,e)}const t=await o.default.storage.session.get(["isFirstMetaMaskControllerSetup"]);a=(null==t?void 0:t.isFirstMetaMaskControllerSetup)===undefined,await o.default.storage.session.set({isFirstMetaMaskControllerSetup:a})}fe(r,s,{},a,n.meta,t),g.isManifestV3||await async function(){let e;try{const t=new URL("https://metamask.github.io/phishing-warning/v3.0.3/");let n,r;t.hash="#extensionStartup",e=window.document.createElement("iframe"),e.setAttribute("src",t.href),e.setAttribute("sandbox","allow-scripts allow-same-origin");const s=new Promise(((e,t)=>{n=e,r=t}));e.addEventListener("load",n),window.document.body.appendChild(e),setTimeout((()=>r(new le)),Z),await s}catch(e){e instanceof le?console.warn("Phishing warning page timeout; page not guaranteed to work offline."):console.error("Failed to initialize phishing warning page",e)}finally{e&&e.remove()}}(),await ae(),i.default.info("MetaMask initialization complete."),re()}catch(e){se(e)}}o.default.runtime.onConnect.addListener((async(...e)=>{await ne,ie(...e)})),o.default.runtime.onConnectExternal.addListener((async(...e)=>{await ne,oe(...e)}));class le extends Error{constructor(){super("Timeout failed")}}async function de(){const e=new _.default({migrations:b.default,defaultVersion:null});if(e.on("error",console.warn),J=await x.get()||e.generateInitialState($),J&&!J.data&&(J=e.generateInitialState($),U.captureMessage("MetaMask - Empty vault found - unable to recover")),e.on("error",(e=>{const t=(0,O.default)(J);U.captureException(e,{extra:{vaultStructure:t}})})),J=await e.migrateData(J),!J)throw new Error("MetaMask - migrator returned undefined");if(!(0,u.isObject)(J.meta))throw new Error(`MetaMask - migrator metadata has invalid type '${typeof J.meta}'`);if("number"!=typeof J.meta.version)throw new Error(`MetaMask - migrator metadata version has invalid type '${typeof J.meta.version}'`);if(!(0,u.isObject)(J.data))throw new Error(`MetaMask - migrator data has invalid type '${typeof J.data}'`);return x.setMetadata(J.meta),x.set(J.data),J}function pe(e,t,n){const{metaMetricsId:r}=z.metaMetricsController.state;if(!(0,C.shouldEmitDappViewedEvent)(r))return;if(!(0,u.hasProperty)(t.permissions,"eth_accounts"))return;const s=Object.keys(n.store.getState().identities).length,a=t.permissions.eth_accounts.caveats;if(a){const t=a[0].value.length;z.metaMetricsController.trackEvent({event:h.MetaMetricsEventName.DappViewed,category:h.MetaMetricsEventCategory.InpageProvider,referrer:{url:e},properties:{is_first_visit:!1,number_of_accounts:s,number_of_accounts_connected:t}})}}function fe(e,t,n,r,u,m){var b,_;z=new M.default({infuraProjectId:"0d73cc5bbe184146957a9d00764db99f",showUserConfirmation:he,initState:e,initLangCode:t,platform:F,notificationManager:V,browser:o.default,getRequestAccountTabIds:()=>q,getOpenMetamaskTabsIds:()=>H,localStore:x,overrides:n,isFirstMetaMaskControllerSetup:r,currentMigrationVersion:u.version,featureFlags:{},offscreenPromise:m}),(0,N.default)({getCurrentChainId:()=>z.networkController.state.providerConfig.chainId,getIpfsGateway:z.preferencesController.getIpfsGateway.bind(z.preferencesController),getUseAddressBarEnsResolution:()=>z.preferencesController.store.getState().useAddressBarEnsResolution,provider:z.provider}),(0,s.pipeline)((0,c.storeAsStream)(z.store),(0,a.default)(1e3),(0,T.default)((async e=>{await x.set(e),te.emit("state-persisted",e)})),(e=>{i.default.error("MetaMask - Persistence pipeline failed",e)})),_=z,global.stateHooks.getSentryAppState=function(){const e=_.memStore.getState();return(0,y.maskObject)(e,v.SENTRY_BACKGROUND_STATE)};const E=()=>B>0||Boolean(Object.keys(H).length)||K,w=(e,t)=>{if(!1===e)z.onClientClosed();else{if(t===f.ENVIRONMENT_TYPE_FULLSCREEN&&Boolean(Object.keys(H).length))return;z.onEnvironmentTypeClosed(t)}};function A(){let e="";const t=P();t&&(e=String(t)),g.isManifestV3?(o.default.action.setBadgeText({text:e}),o.default.action.setBadgeBackgroundColor({color:"#037DD6"})):(o.default.browserAction.setBadgeText({text:e}),o.default.browserAction.setBadgeBackgroundColor({color:"#037DD6"}))}function P(){let e=z.appStateController.waitingForUnlock.length+z.approvalController.getTotalApprovalCount();return z.preferencesController.getUseRequestQueue()&&(e+=z.queuedRequestController.state.queuedRequestCount),e}ie=async e=>{var t,r;if(I.default.isDesktopEnabled()&&ee.DESKTOP!==(null==n||null===(t=n.getOrigin)||void 0===t?void 0:t.call(n)))return void I.default.createStream(e,k.CONNECTION_TYPE_INTERNAL).then((()=>{g.isManifestV3&&e.postMessage({name:"CONNECTION_READY"})}));const a=e.name;if(Y.includes(e.name))return;let i=!1;const c=(0,C.getPlatform)(),u=null!==(r=e.sender)&&void 0!==r&&r.url?new URL(e.sender.url):null;if(i=c===f.PLATFORM_FIREFOX?G[a]:(null==u?void 0:u.origin)===`chrome-extension://${o.default.runtime.id}`,i){var l;const t=(null==n||null===(l=n.getPortStream)||void 0===l?void 0:l.call(n,e))||new d.default(e);if(z.isClientOpen=!0,z.setupTrustedCommunication(t,e.sender),a===f.ENVIRONMENT_TYPE_POPUP&&(B+=1,(0,s.finished)(t,(()=>{B-=1;const e=E();z.isClientOpen=e,w(e,f.ENVIRONMENT_TYPE_POPUP)}))),a===f.ENVIRONMENT_TYPE_NOTIFICATION&&(K=!0,(0,s.finished)(t,(()=>{K=!1;const e=E();z.isClientOpen=e,w(e,f.ENVIRONMENT_TYPE_NOTIFICATION)}))),a===f.ENVIRONMENT_TYPE_FULLSCREEN){const n=e.sender.tab.id;H[n]=!0,(0,s.finished)(t,(()=>{delete H[n];const e=E();z.isClientOpen=e,w(e,f.ENVIRONMENT_TYPE_FULLSCREEN)}))}}else if(u&&u.origin===X.origin&&u.pathname===X.pathname){var p;const t=(null==n||null===(p=n.getPortStream)||void 0===p?void 0:p.call(n,e))||new d.default(e);z.setupPhishingCommunication({connectionStream:t})}else{if(e.sender&&e.sender.tab&&e.sender.url){const t=e.sender.tab.id,n=new URL(e.sender.url),{origin:r}=n;Object.keys(Q).includes(t)||(Q[t]=r);const s=z.permissionController.state.subjects[r],a=s!==undefined,i="New Tab"!==e.sender.tab.title;a&&i&&pe(r,s,z.preferencesController),e.onMessage.addListener((e=>{e.data&&e.data.method===f.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS&&(q[r]=t)}))}oe(e)}},oe=e=>{var t,r;if(I.default.isDesktopEnabled()&&ee.DESKTOP!==(null==n||null===(t=n.getOrigin)||void 0===t?void 0:t.call(n)))return void I.default.createStream(e,k.CONNECTION_TYPE_EXTERNAL);const s=(null==n||null===(r=n.getPortStream)||void 0===r?void 0:r.call(n,e))||new d.default(e);z.setupUntrustedCommunication({connectionStream:s,sender:e.sender})},null!=n&&n.registerConnectListeners&&n.registerConnectListeners(ie,oe),A(),z.decryptMessageController.hub.on(M.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,A),z.encryptionPublicKeyController.hub.on(M.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,A),z.signatureController.hub.on(M.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,A),z.appStateController.on(M.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE,A),z.controllerMessenger.subscribe(M.METAMASK_CONTROLLER_EVENTS.APPROVAL_STATE_CHANGE,A),z.controllerMessenger.subscribe(M.METAMASK_CONTROLLER_EVENTS.QUEUED_REQUEST_STATE_CHANGE,A),z.txController.initApprovals(),V.on(S.NOTIFICATION_MANAGER_EVENTS.POPUP_CLOSED,(({automaticallyClosed:e})=>{e?P()>0&&he():(z.signatureController.rejectUnapproved(h.REJECT_NOTIFICATION_CLOSE_SIG),z.decryptMessageController.rejectUnapproved(h.REJECT_NOTIFICATION_CLOSE),z.encryptionPublicKeyController.rejectUnapproved(h.REJECT_NOTIFICATION_CLOSE),Object.values(z.approvalController.state.pendingApprovals).forEach((({id:e,type:t})=>{switch(t){case l.ApprovalType.SnapDialogAlert:case l.ApprovalType.SnapDialogPrompt:z.approvalController.accept(e,null);break;case l.ApprovalType.SnapDialogConfirmation:case f.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation:case f.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval:case f.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect:z.approvalController.accept(e,!1);break;default:z.approvalController.reject(e,p.ethErrors.provider.userRejectedRequest())}}))),A()})),ee.DESKTOP!==(null==n||null===(b=n.getOrigin)||void 0===b?void 0:b.call(n))&&z.store.subscribe((e=>{I.default.setState(e)})),Object.values(z.snapController.state.snaps).some((e=>!e.preinstalled))&&z.snapController.updateBlockedSnaps()}async function he(){const e=await F.getActiveTabs(),t=Boolean(e.find((e=>H[e.id]))),n=e.length>0&&e[0].extData&&e[0].extData.indexOf("vivaldi_tab")>-1;if(!W&&(n||0===B)&&!t){W=!0;try{const e=z.appStateController.getCurrentPopupId();await V.showPopup((e=>z.appStateController.setCurrentPopupId(e)),e)}finally{W=!1}}}const me=()=>{if(z)return z.metaMetricsController.updateTraits({[h.MetaMetricsUserTrait.InstallDateExt]:(new Date).toISOString().split("T")[0]}),void z.metaMetricsController.addEventBeforeMetricsOptIn({category:h.MetaMetricsEventCategory.App,event:h.MetaMetricsEventName.AppInstalled,properties:{}});setTimeout((()=>{me()}),500)};async function ge(){Boolean(await x.get())||(me(),F.openExtensionInBrowser()),o.default.tabs.onActivated.addListener((e=>{if(z){const{tabId:t}=e,n=Q[t];if(n){const e=z.permissionController.state.subjects[n];e!==undefined&&pe(n,e,z.preferencesController)}}}))}(async function(){await ge(),ue().catch(i.default.error)})()}}},{package:"$root$",file:"app/scripts/background.js"}]],[5],{});